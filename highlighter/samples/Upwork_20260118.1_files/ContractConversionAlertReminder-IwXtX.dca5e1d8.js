(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{1173:function(e,t,n){"use strict";n(742)},1174:function(e,t,n){var o=n(5)((function(i){return i[1]}));o.push([e.i,".cursor-pointer{cursor:pointer}",""]),o.locals={},e.exports=o},2232:function(e,t,n){"use strict";n.r(t);var o=n(43),l=n(24),r=n(57),d=n(316),h=n.n(d);var c={namespaced:!0,state:()=>({alreadyClosedTooltips:[],unpaidRelationShip:{},optOutFeeRelationshipBasic:{}}),actions:{async getOptOutFeeRelationshipUnconfirmed(e){let{commit:t}=e;t("setUnpaidRelationShip",(await this.$httpGql({useSubordinateOauth:!0,handleApiErrors:!0,requestAlias:"C2H.unconfirmedRelation.retrieve"}).post({query:"\n          query optOutFeeRelationshipUnconfirmed($numberOfDaysSinceRequestSent: Int!) {\n             optOutFeeRelationshipUnconfirmed(numberOfDaysSinceRequestSent: $numberOfDaysSinceRequestSent) {\n                id,\n                vendorId\n             }\n          }\n        ",variables:{numberOfDaysSinceRequestSent:3}}).json().catch((e=>(this.$logger.error("fetching optOutFeeRelationshipUnconfirmed failed. Error: ".concat(e)),{data:{optOutFeeRelationshipUnconfirmed:{}}})))).data.optOutFeeRelationshipUnconfirmed)},async getOptOutFeeRelationshipClosedReminderTooltips(e){let{commit:t}=e;t("setAlreadyClosedTooltips",(await this.$httpGql({useSubordinateOauth:!0,handleApiErrors:!0,requestAlias:"C2H.closedReminders.retrieve"}).post({query:"\n          query fetchOptOutFeeRelationshipClosedReminderTooltips {\n            optOutFeeRelationshipClosedReminderTooltips {\n              relationshipId,\n              userType\n            }\n          }\n        "}).json().catch((e=>(this.$logger.error("fetching fetchOptOutFeeRelationshipClosedReminderTooltips failed. Error: ".concat(e)),{data:{optOutFeeRelationshipClosedReminderTooltips:[]}})))).data.optOutFeeRelationshipClosedReminderTooltips)},async getOptOutFeeRelationshipBasic(e,t){let{commit:n}=e,{relationshipId:o}=t;n("setOptOutFeeRelationshipBasic",(await this.$httpGql({handleApiErrors:!0,useSubordinateOauth:!0,requestAlias:"C2H.basicRelationshipInfo.retrieve"}).post({query:"\n          query optOutFeeRelationshipBasicGQL($relationshipId: ID!) {\n            optOutFeeRelationshipBasic(relationshipId: $relationshipId) {\n              id,\n              vendorId,\n              client {\n                name\n              }\n            }\n          }\n        ",variables:{relationshipId:o}}).json().catch((e=>(this.$logger.error("fetching optOutFeeRelationshipBasic failed. Error: ".concat(e)),{data:{optOutFeeRelationshipBasic:{}}})))).data.optOutFeeRelationshipBasic)},async updateClosedTooltips(e,t){let{tooltips:n}=t;await this.$httpGql({handleApiErrors:!0,useSubordinateOauth:!0,requestAlias:"C2H.closedReminders.update"}).post({query:"\n          mutation updateClosedReminderTooltips($optOutFeeRelationshipClosedReminderTooltips: [OptOutFeeRelationshipClosedReminderTooltipListInput]!) {\n            updateOptOutFeeRelationshipClosedReminderTooltips(optOutFeeRelationshipClosedReminderTooltips: $optOutFeeRelationshipClosedReminderTooltips)\n          } \n        ",variables:{optOutFeeRelationshipClosedReminderTooltips:n}}).json().catch((e=>{this.$logger.error("fetching updateOptOutFeeRelationshipClosedReminderTooltips failed. Error: ".concat(e))}))},async resendEmail(e,t){let{relationshipId:n}=t,o=!1;return await this.$httpGql({handleApiErrors:!0,useSubordinateOauth:!0,requestAlias:"C2H.emailReminder.send"}).post({query:"\n          mutation sendVendorActionReminderEmail($relationshipId: ID!){\n            sendVendorActionReminderEmail(relationshipId: $relationshipId)\n          }\n        ",variables:{relationshipId:n}}).json().then((e=>{o=e.data?e.data.sendVendorActionReminderEmail:o})).catch((e=>{this.$logger.error("fetching sendVendorActionReminderEmail failed. Error: ".concat(e))})),o}},mutations:{setAlreadyClosedTooltips(e,t){e.alreadyClosedTooltips=t},setUnpaidRelationShip(e,t){e.unpaidRelationShip=t},setOptOutFeeRelationshipBasic(e,t){e.optOutFeeRelationshipBasic=t}}},R={components:{UpCAlert:o.a,UpLink:r.a},data:()=>({clientName:""}),computed:{...Object(l.e)("contractConversionAlertReminder",["alreadyClosedTooltips","unpaidRelationShip","optOutFeeRelationshipBasic"]),hasTooltipAlreadyReviewed(){return this.alreadyClosedTooltips.some((e=>{var t;let{relationshipId:n}=e;return Number(n)===Number(null===(t=this.unpaidRelationShip)||void 0===t?void 0:t.id)}))}},beforeCreate(){this.$store.hasModule("contractConversionAlertReminder")||this.$store.registerModule("contractConversionAlertReminder",c)},async mounted(){var e;(await Promise.all([this.getOptOutFeeRelationshipUnconfirmed(),this.getOptOutFeeRelationshipClosedReminderTooltips()]),this.unpaidRelationShip.id)&&(await this.getOptOutFeeRelationshipBasic({relationshipId:this.unpaidRelationShip.id}),this.clientName=null===(e=this.optOutFeeRelationshipBasic)||void 0===e||null===(e=e.client)||void 0===e?void 0:e.name)},methods:{...Object(l.b)("contractConversionAlertReminder",["getOptOutFeeRelationshipBasic","getOptOutFeeRelationshipClosedReminderTooltips","updateClosedTooltips","getOptOutFeeRelationshipUnconfirmed","resendEmail"]),async resendEmailReminder(){const e=await this.resendEmail({relationshipId:this.unpaidRelationShip.id}),t={type:e?"success":"danger",duration:5e3,content:e?this.$t("fwh_unpaid_relationship_EmailSent_success"):this.$t("fwh_unpaid_relationship_EmailSent_fail")};this.createToaster(t)},onAlertClose(){const e={relationshipId:this.unpaidRelationShip.id,userType:"VENDOR"};this.updateClosedTooltips({tooltips:[...this.alreadyClosedTooltips,e]})}},injectStyles:[h.a]},m=(n(1173),n(2)),component=Object(m.a)(R,(function(){var e=this,t=e._self._c;return e.clientName&&!e.hasTooltipAlreadyReviewed?t("div",{staticClass:"span-12 px-4x"},[t("UpCAlert",{staticClass:"mb-4x mt-3x",attrs:{"data-test":"alert",close:!0},on:{"alert-close":function(t){return e.onAlertClose()}}},[e._v("\n    "+e._s(e.$t("fwh_unpaid_relationship_info",{clientName:e.clientName}))+"\n    "),t("UpLink",{staticClass:"cursor-pointer",on:{click:function(t){return e.resendEmailReminder()}}},[e._v("\n      "+e._s(e.$t("fwh_unpaid_relationship_resend"))+"\n    ")])],1)],1):e._e()}),[],!1,null,null,null);t.default=component.exports},742:function(e,t,n){var content=n(1174);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("0058f48a",content,!0,{sourceMap:!1,manualInject:!0})}}]);
//# sourceMappingURL=https://upwork-usw2-staging-assets-jsmaps.s3.us-west-2.amazonaws.com/FindWorkHomeNuxt/ContractConversionAlertReminder-IwXtX.dca5e1d8.js.map